<!doctype html>
<html>

<head>
	<script id="Cookiebot" src="https://consent.cookiebot.com/uc.js" data-cbid="6a06e0ff-3af4-42b9-ab66-dd32f9e600e0"
		data-blockingmode="auto" type="text/javascript"></script>
	<!-- Google tag (gtag.js) -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=G-SXLQTMF14Q"></script>
	<script>
		window.dataLayer = window.dataLayer || [];
		function gtag() { dataLayer.push(arguments); }
		gtag('js', new Date());

		gtag('config', 'G-SXLQTMF14Q');
	</script>
	<!-- Google Tag Manager -->
	<script type="915998925114be6a38098363-text/javascript">(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                })(window,document,'script','dataLayer','GTM-MQMRMNL5');</script>
	<!-- End Google Tag Manager -->
		<!-- Clarity tracking code for https://greg.heffner.live/ --><script>    (function(c,l,a,r,i,t,y){        c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};        t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i+"?ref=bwt";        y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);    })(window, document, "clarity", "script", "nry25es3go");</script>
            <script type="text/javascript">
                (function(c,l,a,r,i,t,y){
                    c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
                    t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
                    y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
                })(window, document, "clarity", "script", "nry25es3go");
            </script>
	<link rel="apple-touch-icon" sizes="180x180" href="/image/apple-touch-icon.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/image/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="16x16" href="/image/favicon-16x16.png">
	<link rel="manifest" href="/image/site.webmanifest">

	<style>
		* {
			box-sizing: border-box;
		}

		body {
			font-family: 'trebuchet ms', sans-serif;
			padding: 20px;
			background: #4E90BB;
		}

		.header {
			padding: 10px;
			font-size: 20px;
			text-align: center;
			background: white;
		}

		.leftcolumn {
			float: left;
			width: 75%;
			height: 90vh;
			overflow-y: visable;
		}

		.rightcolumn {
			float: left;
			width: 25%;
			padding-left: 20px;
		}

		.img {
			
			width: 100%;
			padding: 20px;
		}

		.card {
			background-color: white;
			padding: 20px;
			margin-top: 20px;
		}

		.row:after {
			content: "";
			display: table;
			clear: both;
		}

		.footer {
			padding: 20px;
			text-align: center;
			background: #ddd;
			margin-top: 20px;
		}

		@media screen and (max-width: 800px) {

			.leftcolumn,
			.rightcolumn {
				width: 100%;
				padding: 0;
			}
		}

		.navbar {
			display: flex;
			justify-content: flex-end;
			width: 100%;
			background-color: black !important;
			font-family: 'trebuchet ms', sans-serif;
			padding-right: 15px;
			padding-left: 15px;
		}

		.navdiv {
			display: flex;
			align-items: center;
			justify-content: space-between;
		}

		.navbar button {
			background-color: transparent;
			margin-left: 10px;
			border-radius: 10px;
			padding: 10px;
			width: 90px;
		}

		.navbar button a {
			color: transparent;
			font-weight: bold;
			font-size: 15px;
		}

		.navbar li {
			list-style: none;
			display: inline-block;
		}

		.navbar li a {
			color: white;
			font-size: 18px;
			font-weight: bold;
			margin-right: 25px;
			font-family: 'trebuchet ms', sans-serif;
		}

		.navbar button {
			background-color: black;
			margin-left: 10px;
			border-radius: 10px;
			padding: 10px;
			width: 90px;
		}

		.navbar button a {
			color: white;
			font-weight: bold;
			font-size: 15px;
			font-family: 'trebuchet ms', sans-serif;
		}
		.scrollcard {
			height: 200px; 
			overflow: hidden; 
			position: relative;
			background-color: white; 
			padding: 20px;
			margin-top: 20px; 
		}

		.scroll-container {
			height: calc(100% - 40px); 
			overflow: hidden; 
			position: relative;
		}

		.scroll-container nav {
			position: absolute;
			top: 0;
			width: 100%; 
			animation: scroll 20s linear infinite; 
		}

		@keyframes scroll {
			0% {
				top: 100%;
			}
			100% {
				top: -100%;
			}
		}
	</style>

	<meta name="title" content="Nerdsense - Docker Updates - Aug 2024">
	<meta name="description" content="4 steps to secure your images">
	<meta name="keywords" content="Docker, patching, automation, Patching, DockerHub">
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<meta name="language" content="English">
	<meta http-equiv='content-language' content='en-gb'>
	<meta name="author" content="Greg Heffner">
	
	<title>Nerdsense - Docker Updates - Aug 2024</title>
	
	<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3941951641805897"
		crossorigin="anonymous"></script>

	<script async src="https://fundingchoicesmessages.google.com/i/pub-3941951641805897?ers=1"
		nonce="drPCtL_hPnvLGFPUGtHsFQ" type="915998925114be6a38098363-text/javascript"></script>
	<script nonce="drPCtL_hPnvLGFPUGtHsFQ" type="915998925114be6a38098363-text/javascript"> (function() {
              function signalGooglefcPresent() {
                  if (!window.frames['googlefcPresent']) {
                      if (document.body) {
                          const iframe = document.createElement('iframe');
                          iframe.style = 'width: 0; height: 0; border: none; z-index: -1000; left: -1000px; top: -1000px;';
                          iframe.style.display = 'none';
                          iframe.name = 'googlefcPresent';
                          document.body.appendChild(iframe);
                      } else {
                          setTimeout(signalGooglefcPresent, 0);
                      }
                  }
              }
              signalGooglefcPresent();
          })();  
          </script>
</head>

<body>
	<!-- Google Tag Manager (noscript) -->
	<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MQMRMNL5" height="0" width="0"
			style="display:none;visibility:hidden"></iframe></noscript>
	<!-- End Google Tag Manager (noscript) -->
	<nav class="navbar">
		<div class="navdiv">
			<ul>
				<li><a href="https://greg.heffner.live">Home</a></li>
				<li><a href="https://greg.heffner.live/photos.html">Photos</a></li>
				<li><a href="https://greg.heffner.live/blog.html">Blog</a></li>
				<li><a
						href="https://www.paypal.com/donate/?business=UK9DCMKFRTWRN&no_recurring=0&item_name=Thanks+for+supporting+the+page&currency_code=USD">Support</a>
				<li><a href="https://greg.heffner.live/privacy.html">Privacy Policy</a></li>
				<li><a href="https://greg.heffner.live/cookie.html">Cookie Policy</a></li>
				<li><a href="/cdn-cgi/l/email-protection#c1aca0a8afefb1ada0aff4f6f9f281a7a0b2b5aca0a8adefa2aeac">Contact</a>
				</li>
			</ul>
		</div>
	</nav>
	<div class="header">
		<h2>Nerdsense</h2>
	</div>
	<div class="row">
		<div class="leftcolumn">
			<div class="card">
                <h1>Docker Updates: 4 steps to secure your images</h1>
                <h5>Greg Heffner August 11, 2024</h5>

                <img src="/image/blog/2024/Aug/dockerupdates.png" alt="Docker Updates"
                    style="display: block; margin-left: auto; margin-right: auto; width: 35%; height: auto;">

                <p>Just like computers, docker images need to be updated regularly. Please check out <a
                        href="https://greg.heffner.live/image/pages/2024/July/DockerHub.html">DockerHub: Because Ship Happens</a> for a
                    blog about what DockerHub is and a brief overview of docker. I like to update my images monthly for security
                    improvements and performance. Regularly updating your images will remediate vulnerabilities and reduce risk these
                    package inherently contain.</p>
                
                <p>I update my docker images in about four steps. Not too much in this process but I wanted to write it out to share. There are a couple different ways to update docker images, I am going to show
                    how to do it manually inside the image. In this blog I use technotuba/kali-full:v2 which is VERY LARGE. It will take about 20 minutes to first download due to all the packages and updates I maintain. If you would like a smaller package feel free to use the v1. 
                </p>
                
                <ol>
                    <li><strong>PULL IMAGE</strong>
                        <p>
                            First make sure that the image is on the local machine by running "docker pull" and then the image name. I
                            then create a temporary container with that image by running "docker run -it --name kali_updates
                            technotuba/kali-full:v2 /bin/bash"</p>

                    <figure>
                        <img src="/image/blog/2024/Aug/pull.png" alt="DockerHub pull" style="display: block; margin-left: auto; margin-right: auto; width: 80%; height: auto;">
                        <figcaption style="text-align:center;">Start the image with docker run. Interactive session & with TTY, by passing
                        the -it flags. Naming the container kali_updates and using the technotuba/kali-full:v2 as the base image. Finally I am asking to be brought into a bash interface with /bin/bash
                        </figcaption>
                    </figure>
                    </li>
                    <li><strong>UPDATE PACKAGES</strong>
                        <p>
                            Once inside the image, updating the packages is relatively simple. I patch the image with "apt-get update &&
                            apt-get upgrade -y." There are better ways to update your packages in this step and I will be writing about
                            them in the future. Check out <a href="https://greg.heffner.live/image/pages/2024/Aug/ansible.html">Ansible:
                                Let me put you on patch game</a> for some ideas. </p>

                        <img src="/image/blog/2024/Aug/update.png" alt="Docker update"
                            style=" display: block; margin-left: auto; margin-right: auto; width: 80%; height: auto;">
                        <figcaption style="text-align:center;">Updating packages. Shortening the lines of code by adding && to run the upgrade immediately following the update</figcaption>
                    </li><br>
                    <li><strong>COMMIT CHANGES</strong>
                        <p>Committing your changes with a docker image saves your work locally. It would be the same as if you are
                            committing changes in a git local repo except I am not passing a comment here like I would in git commit -m.
                            Check out <a href="https://greg.heffner.live/image/pages/2024/July/GitHub.html">GitHub: What's the fuss
                                about?</a> for a blog about git and github.</p>

                        <img src="/image/blog/2024/Aug/commit.png" alt="DockerHub commit" style=" display: block; margin-left: auto; margin-right: auto; width: 80%; height: auto;">
                        <figcaption style="text-align:center;">docker to commit to save all the changes I made to the kali_updates image and name the docker image
                        "technotuba/kali-fullv2." </figcaption>
                    </li><br>
                    <li><strong>PUSH TO CLOUD</strong>
                        <p>Uploading your docker images to the cloud is a great way to be able to have them available on other systems
                            or to share them with other people. You do not have to push your image to DockerHub as I do in this step. I
                            upload my images to share with anyone who would like <a
                                href="https://hub.docker.com/repository/docker/technotuba/nginx/tags">here</a>. A few prerequisites here
                            would be to have a DockerHub account, have internet access, and have completed steps 1-3 above. </p>
                
                        <img src="/image/blog/2024/Aug/push.png" alt="DockerHub push"
                            style=" display: block; margin-left: auto; margin-right: auto; width: 75%; height: auto;">
                        <figcaption style="text-align:center;">docker login and docker push will upload your image. The image is split into layers when uploaded and
                        downloaded. I only made changes to one layer.</figcaption>
                    </li>
                </ol>
                    <h3>Conclusion</h3>
                
                    <p>And thats it! If you followed the steps above you have successfully downloaded, updated, and then uploaded your
                        first docker image. Now script your updates and let me know how you did! I would love the feedback! </p>

                    <img src="/image/blog/2024/Aug/dockerfin.png" alt="DockerHub completed"
                        style=" display: block; margin-left: auto; margin-right: auto; width: 80%; height: auto;">
                    <figcaption style="text-align:center;">Completed push on <a href="https://hub.docker.com/r/technotuba/kali-full">DockerHub</a></figcaption>

                    
                        <h3><a href="https://www.bing.com">Bing AI</a> explanation</h3>
                        <p><i>
                                Lets break it down into simple steps, just like building with colorful blocks:<br><br>
                                Create Your Docker Image: Imagine youre making a special toy. You gather all the pieces you need: a base, wheels, and decorations. 
                                In the same way, a Docker image is like your toy. It contains everything your app needs to run: code, libraries, and
                                settings.
                                You create this image using a recipe called a Dockerfile. Its like following a step-by-step guide to build your toy.<br><br>
                                Tag Your Toy:
                                Now that youve built your toy, you want to give it a name. Lets call it ‚ÄúSuperApp.‚Äù
                                In Docker, we ‚Äútag‚Äù our image with a name (like ‚ÄúSuperApp‚Äù) and a version (like ‚Äúv1.0‚Äù). This helps us find it later.<br><br>
                                Pack Your Toy in a Box:
                                Imagine putting your toy in a colorful box. This box is like a container.
                                Containers keep your toy safe and separate from other toys. They also make sure it runs the same way everywhere.<br><br>
                                Upload to DockerHub:
                                DockerHub is like a big toy store where everyone shares their toys.
                                To upload your toy, you need a DockerHub account (like your toy store membership).
                                Click the ‚ÄúUpload‚Äù button, and your toy (image) goes to DockerHub.<br><br>
                                Share with Friends:
                                Now your toy is on display at the toy store (DockerHub). Anyone can see it!
                                Friends can download your toy (pull the image) and play with it on their computers.<br><br>
                                Keep It Updated:
                                Sometimes you add new features to your toy. You update the image (like adding wings to your toy plane).
                                To upload the updated toy, repeat steps 3-5.
                                Remember, Docker makes sure your toys (apps) are easy to share, play with, and update! üöÄüê≥</i></p>
</div>
</div>
<div class="rightcolumn">
	<div class="card">
		<h3>About Me</h3>
		<p>I served in the U.S. Army, specializing in Network Switching Systems and was attached to a Patriot
			Missile
			System Battalion. After my deployment and Honorable discharge, I went to college in Jacksonville, FL
			for
			Computer Science. I have two beautiful and very intelligent daughters. I have more than 20 years
			professional IT
			experience. This page is made to learn and have
			fun. If
			its messed up, let me know. Im still learning :)</p>
	</div>
	<div class="scrollcard">
		<h3>Recent Blogs</h3>
		<div class="scroll-container">
			<nav>
				<li><a href="https://greg.heffner.live/image/pages/2024/July/VPNs.html">VPNs: Web browsing and IP masking</a></li>
				<li><a href="https://greg.heffner.live/image/pages/2024/July/thecloud.html">The Cloud: Not the Floridian Cumulonimbus kind</a></li>
				<li><a href="https://greg.heffner.live/image/pages/2024/July/wifi.html">WiFi: Wireless internet magic</a></li>
				<li><a href="https://greg.heffner.live/image/pages/2024/July/homebuild.html">A Home Build: If I were to build it today</a></li>
				<li><a href="https://greg.heffner.live/image/pages/2024/Aug/k8s.html">Kubernetes: 86 the Prime Rib</a></li>
                <li><a href="https://greg.heffner.live/image/pages/2024/Aug/ansible.html">Ansible: Let me put you on patch game</a></li>
			</nav>
		</div>
	</div>
	<div class="card">
		<h3>Popular Projects</h3>
		<li><a href="https://github.com/gregheffner/k8-nginx-webpage">Kubernetes cluster build</a></li>
		<li><a href="https://github.com/gregheffner/python-init">CookieCutter Script - A python template</a>
		</li>
		<li><a href="https://github.com/gregheffner/playbooks/tree/main/tasks/">Ansible Kali Docker Build</a></li>
		<li><a href="https://github.com/gregheffner/playbooks/blob/main/tasks/k8reboot.yml">Ansible Kubernetes node
				bounce w/NGINX HA</a></li>
	</div>
	<div class="card">
		<h3>Book Board</h3>
		<li><a href="https://www.amazon.com/Phoenix-Project-DevOps-Helping-Business/dp/0988262592">The Phoenix
				Project:
				A Novel about IT, DevOps, and Helping Your Business Win</a></li>
		<li><a href="https://www.amazon.com/Algorithms-to-Live-By-audiobook/dp/B01D24NAL6/">Algorithms to Live
				By: The
				Computer Science of Human Decisions</a></li>
		<li><a href="https://www.ebay.com/itm/144165393633?">Little Lefty</a></li>
		<li><a href="https://www.amazon.com/Anniversary-Paperback-Volumes-Limited-Original/dp/1637990049/">Harry
				Potter</a>
		</li>
	</div>
	<div class="card">
		<h3>Weather Loop </h3>
		<a href="https://radar.weather.gov/ridge/standard/SOUTHEAST_loop.gif">
			<img border="3" src="https://radar.weather.gov/ridge/standard/SOUTHEAST_loop.gif"
				style="border: 1px solid FF0000; width: 300px;">
	</div>
</div>
</div>
</div>
<script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script>
<script src="/cdn-cgi/scripts/7d0fa10a/cloudflare-static/rocket-loader.min.js"
	data-cf-settings="f2199bb571cfda9c96d3d8cf-|49" defer></script>
<script defer src="https://static.cloudflareinsights.com/beacon.min.js/vcd15cbe7772f49c399c6a5babf22c1241717689176015"
	integrity="sha512-ZpsOmlRQV6y907TI0dKBHq9Md29nnaEIPlkf84rnaERnq6zvWvPUqr2ft8M1aS28oN72PdrCzSjY4U6VaAw1EQ=="
	data-cf-beacon='{"rayId":"8a0c47bffe7b53f3","r":1,"version":"2024.4.1","token":"58654ca0c624448c9c52f5291ddf5bec"}'
	crossorigin="anonymous"></script>
</body>

</html>
